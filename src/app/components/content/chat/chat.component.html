<div class="chat-container">
  <!-- –õ—ñ–≤–∞ –ø–∞–Ω–µ–ª—å –∑—ñ —Å–ø–∏—Å–∫–æ–º —á–∞—Ç—ñ–≤ -->
  <aside class="chat-sidebar">
    <div class="chat-header">
      <h2 class="sidebar-title">–ß–∞—Ç–∏</h2>
    </div>
    <div *ngIf="(chats | async) as chatList" class="chat-list">
      <div
        *ngFor="let chat of chatList"
        class="chat-item"
        (click)="selectChat(chat.chat_id)"
        [ngClass]="{'active-chat': chat.chat_id === selectedChatId}"
      >
        <div class="chat-info">
          <span class="chat-users">{{ chat.chat_users }}</span>
          <span class="last-message-time">{{ chat.last_message_time | date: 'shortTime' }}</span>
        </div>
      </div>
    </div>
  </aside>

  <section class="chat-content">
    <div class="chat-header">
      <div class="user-info">
        <span class="user-nickname">{{ userNickname }}</span>
      </div>
    </div>

    <div class="chat-messages" #messageContainer>
      <div
        *ngFor="let message of messages"
        [ngClass]="{'message-sent': message.user_id === currentUserId, 'message-received': message.user_id !== currentUserId}"
        class="message-bubble"
      >
        <div class="message-content">
          <p class="message-text">{{ message.message }}</p>
          <span class="message-time">{{ message.timestamp | date: 'shortTime' }}</span>
          <button
            class="delete-btn"
            *ngIf="message.user_id === currentUserId"
            (click)="deleteMessage(message.message_id)"
          >
            üóëÔ∏è
          </button>
        </div>
      </div>
    </div>

    <form [formGroup]="messageForm" (ngSubmit)="sendMessage()" class="chat-input-container">
      <input
        type="text"
        placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..."
        formControlName="message"
        class="message-input"
        (keyup.enter)="sendMessage()"
      />
      <button type="submit" class="send-btn" [disabled]="!messageForm.valid">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
    </form>
  </section>
</div>
