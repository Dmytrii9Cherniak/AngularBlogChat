<div class="chat-container">
  <aside class="chat-sidebar">
    <div class="chat-header">
      <h2 class="sidebar-title">Чати</h2>
    </div>
    <div *ngIf="(chats | async) as chatList" class="chat-list">
      <div
        *ngFor="let chat of chatList"
        class="chat-item"
        (click)="selectChat(chat.chat_id, chat)"
        [ngClass]="{'active-chat': chat.chat_id === selectedChatId}"
      >
        <div class="chat-info">
          <span class="chat-users">{{ chat.chat_users }}</span>
          <span class="last-message-time">{{ chat.last_message_time | date: 'shortTime' }}</span>
        </div>
      </div>
    </div>
  </aside>

  <section class="chat-content">
    <div class="chat-header">
      <div class="user-info">
        <span class="user-nickname">{{ username }}</span>
      </div>
    </div>

    <div class="chat-messages">
      <div *ngFor="let message of messages" class="message-bubble" [ngClass]="{'message-sent': message.user_id === currentUserId, 'message-received': message.user_id !== currentUserId}">
        <p class="message-text">{{ message.message }}</p>
        <span class="message-time">{{ message.timestamp | date: 'shortTime' }}</span>
      </div>
    </div>

    <form [formGroup]="messageForm" (ngSubmit)="sendMessage()" class="chat-input-container">
      <input formControlName="message" placeholder="Введіть повідомлення..." class="message-input" />
      <button type="submit" [disabled]="!messageForm.valid" class="send-btn">Відправити</button>
    </form>
  </section>
</div>
