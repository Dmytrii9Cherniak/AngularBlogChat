<div class="profile-container" [formGroup]="formHelper.form">
  <div class="profile-header">
    <div class="avatar-section">
      <img [src]="getAvatarUrl()" alt="Avatar" (error)="onImageError($event)" />
      <div *ngIf="isEditMode" class="avatar-actions">
        <label for="avatarInput" class="change-avatar-button">Change Avatar</label>
        <input id="avatarInput" type="file" (change)="onAvatarChange($event)" />
      </div>
    </div>
  </div>

  <div class="profile-details">
    <div class="detail-item" *ngFor="let field of getProfileFields()">
      <label>{{ field | titlecase }}:</label>
      <p *ngIf="!isEditMode">{{ personalProfileData[field] || 'N/A' }}</p>
      <input *ngIf="isEditMode" [formControlName]="field" type="text" />
    </div>
  </div>

  <div class="social-section">
    <h3>Social Links</h3>
    <div class="social-links">
      <div class="detail-item" *ngFor="let key of getSocialKeys()">
        <label>{{ key | titlecase }}:</label>
        <p *ngIf="!isEditMode">{{ personalProfileData.socials[key] || 'N/A' }}</p>
        <input *ngIf="isEditMode" [formControlName]="'socials.' + key" type="text" />
      </div>
    </div>
  </div>

  <div class="blacklist-section">
    <h3>Blocked Users</h3>
    <div *ngIf="blackListUsers.length; else noUsers">
      <div *ngFor="let user of blackListUsers" class="blacklist-user">
        <img src="assets/images/no_profile_avatar.png" class="user-avatar" alt="User Avatar" />
        <div class="user-details">
          <span class="nickname">{{ user.blocked_user.nickname }}</span>
          <span class="username">{{ user.blocked_user.username }}</span>
        </div>
        <button class="unblock-button" (click)="unblockUser(user.blocked_user.id)">Unblock</button>
      </div>
    </div>
    <ng-template #noUsers>
      <p class="no-users">No blocked users.</p>
    </ng-template>
  </div>

  <div class="profile-edit-section">
    <button *ngIf="!isEditMode" class="edit-profile-button" (click)="toggleEditMode()">Edit Profile</button>
    <button *ngIf="isEditMode" class="save-profile-button" (click)="updateProfile()">Save Changes</button>
  </div>
</div>
