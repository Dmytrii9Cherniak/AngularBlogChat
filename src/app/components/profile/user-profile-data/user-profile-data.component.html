<div class="profile-container">
  <div class="tabs-container">
    <div
      class="tab-item"
      *ngFor="let tab of [
        { name: 'basicInfo', icon: 'üè†', title: '–û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è' },
        { name: 'aboutMe', icon: 'üìñ', title: '–ü—Ä–æ —Å–µ–±–µ' },
        { name: 'security', icon: 'üîí', title: '–ë–µ–∑–ø–µ–∫–∞' }
      ]"
      [ngClass]="{'active-tab': activeTab === tab.name}"
      (click)="setActiveTab(tab.name)">
      <span class="tab-icon">{{ tab.icon }}</span>
      <span class="tab-title">{{ tab.title }}</span>
    </div>
  </div>

  <div class="tab-pane security-tab" *ngIf="activeTab === 'security'" [ngClass]="{'show': activeTab === 'security'}">
    <h3 class="tab-title">üîí –ë–µ–∑–ø–µ–∫–∞</h3>

    <!-- –§–æ—Ä–º–∞ –∑–º—ñ–Ω–∏ –ø–∞—Ä–æ–ª—è -->
    <form [formGroup]="newPasswordForm" class="security-form">
      <h3 class="section-title">üîë –ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</h3>

      <div class="form-group">
        <label>–°—Ç–∞—Ä–∏–π –ø–∞—Ä–æ–ª—å</label>
        <input formControlName="current_password" type="password" class="form-control" placeholder="–í–≤–µ–¥—ñ—Ç—å —Å—Ç–∞—Ä–∏–π –ø–∞—Ä–æ–ª—å" (input)="changePasswordServerError = null"/>
      </div>

      <div class="form-group">
        <label>–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å</label>
        <input formControlName="new_password" type="password" class="form-control" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å"/>

        <p class="error-text" *ngIf="newPasswordForm.controls['new_password'].hasError('required') && newPasswordForm.controls['new_password'].touched">
          –ü–æ–ª–µ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø—É—Å—Ç–∏–º
        </p>
        <p class="error-text" *ngIf="newPasswordForm.controls['new_password'].hasError('pattern') && newPasswordForm.controls['new_password'].touched">
          –ü–∞—Ä–æ–ª—å –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤, –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É —ñ –æ–¥–∏–Ω —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Å–∏–º–≤–æ–ª
        </p>
      </div>

      <div class="form-group">
        <label>–ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å</label>
        <input formControlName="confirm_password" type="password" class="form-control" placeholder="–ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å"/>

        <p class="error-text" *ngIf="newPasswordForm.errors?.['passwordMismatch'] && newPasswordForm.controls['confirm_password'].touched">
          –ü–∞—Ä–æ–ª—ñ –Ω–µ —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å!
        </p>
      </div>

      <p class="server-error" *ngIf="changePasswordServerError">{{ changePasswordServerError }}</p>

      <button type="button" class="btn btn-primary change-password-btn" (click)="changeProfilePassword()" [disabled]="newPasswordForm.invalid">
        üîÑ –û–Ω–æ–≤–∏—Ç–∏ –ø–∞—Ä–æ–ª—å
      </button>
    </form>

    <div class="blacklist-section">
      <h3 class="section-title">üö´ –ß–æ—Ä–Ω–∏–π —Å–ø–∏—Å–æ–∫</h3>

      <ng-container *ngIf="blackListUsers.length > 0; else noUsers">
        <div class="blacklist-container">
          <div *ngFor="let user of blackListUsers" class="blacklist-user">
            <img src="assets/images/no_profile_avatar.png" class="user-avatar" alt="User Avatar" />
            <div class="user-details">
              <span class="nickname">{{ user.blocked_user.nickname }}</span>
              <span class="username">{{ user.blocked_user.username }}</span>
            </div>
            <button class="unblock-button" (click)="unblockUser(user.blocked_user.id)">üöÄ –†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏</button>
          </div>
        </div>
      </ng-container>

      <ng-template #noUsers>
        <div class="no-blacklist-message">
          <p>üïäÔ∏è –£ –≤–∞—à–æ–º—É —á–æ—Ä–Ω–æ–º—É —Å–ø–∏—Å–∫—É –ø–æ–∫–∏ –Ω–µ–º–∞—î –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>
